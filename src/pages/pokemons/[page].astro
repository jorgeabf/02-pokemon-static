---
import type { GetStaticPaths } from 'astro'
import PokemonCard from '../../components/PokemonCard.astro'
import MainLayout from '../../layouts/MainLayout.astro'

export const getStaticPaths = (async ({ paginate }) => {
  const API_URL = 'https://pokeapi.co/api/v2/pokemon?limit=151'
  const response = await fetch(API_URL)
  const { results } = (await response.json()) as PokemonListResponse

  return paginate(results, { pageSize: 18 })
}) satisfies GetStaticPaths

const { page } = Astro.props
---

<MainLayout title='Pokemon Static App'>
  <section>
    <aside class='flex justify-between space-x-4 mb-8 items-center'>
      <nav class='flex gap-4'>
        <a
          href={page.url.prev}
          class:list={['nav-btn', { disabled: !page.url.prev }]}
          >Anteriores</a
        >
        <a
          href={page.url.next}
          class:list={['nav-btn', { disabled: !page.url.next }]}
          >Siguientes</a
        >
      </nav>
      <span>PÃ¡gina {page.currentPage} de {page.lastPage}</span>
    </aside>

    <ul
      aria-label='Pokemon listado'
      class='grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4'
    >
      {
        page.data.map(({ name, url }) => (
          <PokemonCard
            name={name}
            url={url}
          />
        ))
      }
    </ul>
  </section>
</MainLayout>

<style>
  .nav-btn {
    @apply px-4 py-2 bg-orange-700 rounded-md;
  }

  .disabled {
    @apply cursor-not-allowed bg-gray-500 pointer-events-none;
  }
</style>
